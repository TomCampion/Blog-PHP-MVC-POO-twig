{% extends 'layout.twig' %}

 {% block title %}Gestion des Posts{% endblock %}

 {% block content %}

     {% if session.id is not empty and session.admin == 1 %}
    <!-- blog Subpage -->
    <section class="pt-page pt-page-6">
        <div class="border-block-top-110"></div>
        <div class="section-inner">
            <div class="section-title-block">
                <div class="section-title-wrapper">
                    <h2 class="section-title">Gestion des Posts</h2>
                </div>
            </div>

            <!--
            <form method="post" action="posts">
                <p>Trier les résultats par <select name="sort">
                        <option value="id">ID</option>
                        <option value="firstname">Prénom</option>
                        <option value="lastname">Nom</option>
                        <option value="email">Email</option>
                        <option value="admin">Admin</option>
                        <option value="restricted">Restricted</option>
                        <option value="register_date">Register date</option>
                    </select>
                    ordre
                    <select name="order">
                        <option value="ASC">croissant</option>
                        <option value="DESC">décroissant</option>
                    </select>
                    <input type="submit" value="trier">
                </p>
            </form>
            -->
        <!-- blog Content -->
        <div class="row">
            <div class="col-lg-12 col-md-12 mx-auto">
                <table class="table table-striped">
                    <thead class="thead-dark">
                    <tr>
                        <th scope="col">ID</th>
                        <th scope="col">Statut</th>
                        <th scope="col">Titre</th>
                        <th scope="col">Auteur</th>
                        <th scope="col">Chapô</th>
                        <th scope="col">Date de création</th>
                        <th scope="col">Date de modification</th>
                        <th scope="col"></th>
                    </tr>
                    </thead>
                    {% for post in posts %}
                    <tbody>
                    <tr>
                        <!--<td><input type="checkbox" name="posts[]" value="{{post.id}}"></td>-->
                        <td>{{post.id}}</td>
                        <td>{{post.state}}</td>
                        <td>{{ post.title}}</td>
                        <td>{{post.author}}</td>
                        <td>{{post.standfirst}}</td>
                        <td>{{post.creationDate |date("d/m/Y H:i")}}</td>
                        <td>{{post.updateDate |date("d/m/Y H:i")}}</td>
                        <td><a class="voir_post" href="post-{{post.id}}">Voir le post</a></td>
                    </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <!-- /blog Content -->
    {% else %}
        <h4>Vous devez être connecté avec un compte administrateur pour accéder à cette page ! <a href="connexion">Connectez-vous !</a> </h4>
    {% endif %}

 {% endblock %}